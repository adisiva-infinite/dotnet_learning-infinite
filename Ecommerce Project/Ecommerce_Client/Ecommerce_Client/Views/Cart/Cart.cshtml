@model IEnumerable<Ecommerce_Client.Models.ShoppingCart>

@{ ViewBag.Title = "Your Shopping Cart"; }

<h2>Your Shopping Cart</h2>

@if (!Model.Any())
{
<p>Your cart is empty.</p> }
else
{
<table class="table table-bordered">
    <thead>
        <tr>
            <th>Product Image</th>
            <th>Product</th>
            <th>Quantity</th>
            <th>Unit Price</th>
            <th>Subtotal</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
<tr>
    <td>
        @if (!string.IsNullOrEmpty(item.Product.ProductImage))
        {
<img src="@item.Product.ProductImage" alt="@item.Product.ProductName" style="width: 100px;" /> }
else
{
<span>No Image</span>}
    </td>
    <td>@item.Product.ProductName</td>
    <td>@item.Quantity</td>
    <td>₹ @item.Product.UnitCost/-</td>
    <td>₹ @(item.Quantity * item.Product.UnitCost)/-</td>
    <td>
        <form action="@Url.Action("UpdateCart", "Cart")" method="post" style="display:inline;">
            <input type="hidden" name="recordId" value="@item.RecordId" />
            <input type="number" name="quantity" value="@item.Quantity" min="1" class="form-control" style="width: 60px; display:inline;" />
            <button type="submit" class="btn btn-primary btn-sm">Update</button>
        </form>
        <form action="@Url.Action("RemoveFromCart", "Cart")" method="post" style="display:inline;">
            <input type="hidden" name="recordId" value="@item.RecordId" />
            <button type="submit" class="btn btn-danger btn-sm">Remove</button>
        </form>
    </td>
</tr>}
    </tbody>
</table>

<h4>Total Amount :₹ @Model.Sum(i => i.Quantity * i.Product.UnitCost).ToString()/-</h4>
                                <a href="@Url.Action("Checkout", "Cart")" class="btn btn-success">Proceed to Checkout</a>}